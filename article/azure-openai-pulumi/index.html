<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.146.5"><meta name=viewport content="width=device-width,initial-scale=1"><title>How to Provision Azure OpenAI with Pulumi in C# &#183; by Alex Code blog</title>
<meta name=keywords content="azure,azure-openai,pulumi"><meta name=description content><link type=text/css rel=stylesheet href=https://byalexblog.net/css/print.css media=print><link type=text/css rel=stylesheet href=https://byalexblog.net/css/poole.css><link type=text/css rel=stylesheet href=https://byalexblog.net/css/syntax.css><link type=text/css rel=stylesheet href=https://byalexblog.net/css/hyde.css><link type=text/css rel=stylesheet href=https://byalexblog.net/css/vs_theme_style.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class=container><div class=sidebar-about><a href=https://byalexblog.net/><h1>by Alex Code blog</h1></a><p class=lead>Smart thoughts... and not very smart too!</p></div><nav><ul class=sidebar-nav><li><a href=https://byalexblog.net/>Home</a></li><li><a href=https://byalexblog.net/article>Articles</a></li><li><a href=https://github.com/lanubisl target=_blank>Github</a></li><li><a href=https://www.linkedin.com/in/panfilenok target=_blank>LinkedIn</a></li></ul></nav><p>&copy; 2025. All rights reserved.</p></div></aside><main class="content container"><div class=post><h1>How to Provision Azure OpenAI with Pulumi in C#</h1><time datetime=2025-04-17T18:50:13Z class=post-date>Thu, Apr 17, 2025</time><p><img src=/images/azure-openai-pulumi/logo.png alt></p><p>With the rise of AI-powered applications, developers and organizations are increasingly looking to integrate large language models into their solutions. Azure OpenAI Service provides access to powerful models like GPT-4, Codex, and DALL·E, backed by Azure’s infrastructure. In this guide, we&rsquo;ll walk you through provisioning Azure OpenAI resources using Pulumi, a modern Infrastructure as Code (IaC) tool that supports multiple languages including TypeScript, Python, Go, and C#.</p><h2 id=prerequisites>Prerequisites</h2><p>To get started, ensure you have:</p><ul><li>An active Azure subscription</li><li>Azure CLI installed and logged in (az login)</li><li>.NET SDK installed</li><li>Pulumi CLI installed</li><li>A Pulumi C# project set up (run pulumi new azure-csharp)</li></ul><h2 id=step-by-step-provision-azure-openai-with-pulumi-in-c>Step-by-Step: Provision Azure OpenAI with Pulumi in C#</h2><h3 id=step-1-add-azure-native-nuget-package>Step 1: Add Azure Native NuGet Package</h3><p>In your project directory, install the Azure Native Pulumi package:</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>dotnet add package Pulumi.AzureNative
</span></span></code></pre></div><h3 id=step-2-create-a-resource-group>Step 2: Create a Resource Group</h3><p>In your MyStack.cs file (or wherever your stack logic lives), define a new <a href=https://www.pulumi.com/registry/packages/azure-native/api-docs/resources/resourcegroup/ target=_blank rel=noopener>resource group</a>:</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>Pulumi.Config config = <span style=color:#8839ef>new</span> Pulumi.Config();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Azure.Resources.ResourceGroup rg = <span style=color:#8839ef>new</span> Azure.Resources.ResourceGroup(
</span></span><span style=display:flex><span>    <span style=color:#40a02b>&#34;rg&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#8839ef>new</span> Azure.Resources.ResourceGroupArgs
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        ResourceGroupName = <span style=color:#40a02b>&#34;rg-my-resource-group&#34;</span>,
</span></span><span style=display:flex><span>        Location = config.Require(<span style=color:#40a02b>&#34;location&#34;</span>),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=step-3-create-a-cognitive-services-account>Step 3: Create a Cognitive Services Account</h3><p>The Azure OpenAI resource is provisioned as a type of <a href=https://www.pulumi.com/registry/packages/azure-native/api-docs/cognitiveservices/account/ target=_blank rel=noopener>Cognitive Services Account</a> with the kind set to &ldquo;OpenAI&rdquo;.</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>Azure.CognitiveServices.Account account = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Account(
</span></span><span style=display:flex><span>    <span style=color:#40a02b>&#34;openai&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#8839ef>new</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        ResourceGroupName = rg.Name,
</span></span><span style=display:flex><span>        Location = rg.Location,
</span></span><span style=display:flex><span>        AccountName = <span style=color:#40a02b>&#34;openai-my-openai-account&#34;</span>,
</span></span><span style=display:flex><span>        Kind = <span style=color:#40a02b>&#34;OpenAI&#34;</span>,
</span></span><span style=display:flex><span>        Sku = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Inputs.SkuArgs
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            Name = <span style=color:#40a02b>&#34;S0&#34;</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=step-4-create-model-dployment>Step 4: Create Model Dployment</h3><p>We need to define a <a href=https://www.pulumi.com/registry/packages/azure-native/api-docs/cognitiveservices/deployment/ target=_blank rel=noopener>deployment for the OpenAI model</a>. This is where you specify the model type, version, and other properties.</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>Azure.CognitiveServices.Deployment deployment = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Deployment(
</span></span><span style=display:flex><span>    <span style=color:#40a02b>&#34;openai-deployment&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#8839ef>new</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        ResourceGroupName = rg.Name,
</span></span><span style=display:flex><span>        AccountName = account.Name,
</span></span><span style=display:flex><span>        Sku = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Inputs.SkuArgs
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            Name = <span style=color:#40a02b>&#34;GlobalStandard&#34;</span>,
</span></span><span style=display:flex><span>            Capacity = <span style=color:#fe640b>50</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        Properties = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Inputs.DeploymentPropertiesArgs
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            Model = <span style=color:#8839ef>new</span> Azure.CognitiveServices.Inputs.DeploymentModelArgs
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                Format = <span style=color:#40a02b>&#34;OpenAI&#34;</span>,
</span></span><span style=display:flex><span>                Name = <span style=color:#40a02b>&#34;gpt-4o&#34;</span>,
</span></span><span style=display:flex><span>                Version = <span style=color:#40a02b>&#34;2024-11-20&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            RaiPolicyName = <span style=color:#40a02b>&#34;Microsoft.Default&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>); 
</span></span></code></pre></div><h3 id=step-5-extract-api-key>Step 5: Extract API Key</h3><p>To interact with the OpenAI API, you need to extract the API key from the Cognitive Services account.</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>Output&lt;Azure.CognitiveServices.ListAccountKeysResult&gt; keys = 
</span></span><span style=display:flex><span>    Azure.CognitiveServices.ListAccountKeys.Invoke(
</span></span><span style=display:flex><span>        <span style=color:#8839ef>new</span> Azure.CognitiveServices.ListAccountKeysInvokeArgs
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            ResourceGroupName = rg.Name,
</span></span><span style=display:flex><span>            AccountName = account.Name
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Output&lt;<span style=color:#d20f39>string?</span>&gt; key = keys.Apply(keys =&gt; keys.Key1);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8839ef>return</span> key;
</span></span></code></pre></div><p>you can now use the <code>key</code> variable to specify an application environment variable or better a Key Vault secret.</p><h3 id=step-6-deploy-the-stack>Step 6: Deploy the Stack</h3><p>Run the following command to deploy your stack:</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pulumi up
</span></span></code></pre></div><p>This command will show you a preview of the resources that will be created. Review the changes and confirm to proceed with the deployment.</p><h2 id=conclusion>Conclusion</h2><p>Using Pulumi to manage Azure resources offers the power of traditional IaC with the flexibility of modern programming. As AI services become a key part of the developer toolkit, tools like Pulumi make it easier to automate and scale responsibly.</p><p>If you&rsquo;re curious to learn more, check out:</p><ul><li><a href=https://learn.microsoft.com/en-us/azure/ai-services/openai/ target=_blank rel=noopener>Azure OpenAI Documentation</a></li><li><a href=https://www.pulumi.com/registry/packages/azure-native/ target=_blank rel=noopener>Pulumi Azure Native Docs</a></li><li><a href=https://github.com/pulumi/examples target=_blank rel=noopener>Pulumi Examples</a></li></ul></div><h2>Comments</h2><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//byalexblog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main></body></html>