<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.109.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Host React frontend app on Azure Storage Account &#183; by Alex Code blog</title><meta name=description content><link type=text/css rel=stylesheet href=https://byalexblog.net/css/print.css media=print><link type=text/css rel=stylesheet href=https://byalexblog.net/css/poole.css><link type=text/css rel=stylesheet href=https://byalexblog.net/css/syntax.css><link type=text/css rel=stylesheet href=https://byalexblog.net/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class=container><div class=sidebar-about><a href=https://byalexblog.net/><h1>by Alex Code blog</h1></a><p class=lead>Smart thoughts... and not very smart too!</p></div><nav><ul class=sidebar-nav><li><a href=https://byalexblog.net/>Home</a></li><li><a href=https://byalexblog.net/article>Articles</a></li><li><a href=https://github.com/lanubisl target=_blank>Github</a></li><li><a href=https://www.linkedin.com/in/panfilenok target=_blank>LinkedIn</a></li></ul></nav><p>&copy; 2023. All rights reserved.</p></div></aside><main class="content container"><div class=post><h1>Host React frontend app on Azure Storage Account</h1><time datetime=2023-01-10T22:03:40Z class=post-date>Tue, Jan 10, 2023</time><p>Running a React frontend web application on an Azure Storage account is a great way to host your app with a low cost and high scalability. In this post, we&rsquo;ll go through the steps of setting up a new Azure Storage account and deploying your React app to it.</p><p>First, create a new Azure Storage account by going to the Azure portal and selecting &ldquo;Create a resource&rdquo; and then &ldquo;Storage account.&rdquo; Fill in the necessary details and select a subscription and resource group.</p><p>Once the storage account is created, go to the &ldquo;Data management&rdquo; â†’ &ldquo;Static website&rdquo; menu item, and enable the &ldquo;Static Website&rdquo; feature. This will create a container called $web and you&rsquo;ll need to upload your files to this container. This feature also provides endpoint for serving content. Make sute that you select &ldquo;Index document name&rdquo; as index.html and you have it in your build directory.</p><p>Next, build and upload your React app to the $web container. You can do this using tools like Azure Storage Explorer, Azure Cli or Azure powershell.
Here is an example of how to do this using Azure Cli:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az storage blob upload-batch 
</span></span><span style=display:flex><span>    --source $REACT_APP_BUILD_DIR 
</span></span><span style=display:flex><span>    --destination <span style=color:#e6db74>&#39;$web&#39;</span> 
</span></span><span style=display:flex><span>    --overwrite 
</span></span><span style=display:flex><span>    --connection-string $AZURE_STORAGE_CONNECTION_STRING 
</span></span></code></pre></div><p>You can get the connection string for your storage account by going to the &ldquo;Access keys&rdquo; menu item.</p><p>Once the files are uploaded, you can access your app by going to the endpoint provided by the static website feature. You may notice that the app is not working as expected. This is because the app is using the browser&rsquo;s history API to navigate between pages. The browser is trying to access the pages directly and not going through the index.html file which is located in the root of your $web blob container. To fix this we need to configure the hosting platform to redirect all such requests to that index.html file. This can be done by using Azure CDN profile.</p><p>Create a new CDN profile by going to the Azure portal and selecting &ldquo;Create a resource&rdquo; and then &ldquo;CDN profile.&rdquo; Fill in the necessary details and select a &ldquo;Microsoft Standard&rdquo; pricing tier, subscription and resource group. Once the profile is created, go to the &ldquo;Endpoints&rdquo; menu item and create a new endpoint. Select the storage account you created earlier as the origin. Once profile is created, go to &ldquo;Rule Engine&rdquo; menu item and add the following rule:
<img src=/images/react-azure-storage/azure-cdn-react-rule.png alt=azure-cdn-react-rule></p><p>Once the rule is created, go to the &ldquo;Overview&rdquo; menu item and copy the &ldquo;Endpoint hostname&rdquo; value. This is the endpoint for your app. You can now access your app by going to this endpoint.</p></div><h2>Comments</h2><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//byalexblog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-44968940-4","auto"),ga("send","pageview"))</script></body></html>